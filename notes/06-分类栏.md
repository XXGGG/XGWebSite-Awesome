# 秩序与分类 (Categories)

## 3. 实现 CategoryTabs 组件

在 `components` 目录下新建 `category-tabs.tsx`：

```tsx
"use client"

import * as React from "react"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"

interface CategoryTabsProps {
  categories: string[]
  activeCategory: string
  onSelect: (category: string) => void
}

export function CategoryTabs({ categories, activeCategory, onSelect }: CategoryTabsProps) {
  return (
    <div className="w-full overflow-x-auto pb-4 scrollbar-hide">
      <div className="flex w-max space-x-2">
        {/* "全部" 按钮 */}
        <Button
          variant={activeCategory === "All" ? "default" : "outline"}
          size="sm"
          onClick={() => onSelect("All")}
        >
          All
        </Button>

        {/* 其他标签按钮 */}
        {categories.map((category) => (
          <Button
            key={category}
            variant={activeCategory === category ? "default" : "outline"}
            size="sm"
            onClick={() => onSelect(category)}
          >
            {category}
          </Button>
        ))}
      </div>
    </div>
  )
}
```

> **CSS 小技巧**: `scrollbar-hide` 是一个实用类，可以隐藏滚动条但保留滚动功能。你可能需要在 `app/globals.css` 里加一段 CSS，或者安装 `tailwind-scrollbar-hide` 插件。
> 简单起见，你可以先不管它，或者在 `app/globals.css` 加一句：
> `.scrollbar-hide::-webkit-scrollbar { display: none; }`
> `.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }`


## 整合到首页 (逻辑实现)

现在我们回到 `app/page.tsx`，把状态管理（State Management）加进去。

因为我们需要根据点击的标签来过滤数据，所以 `Home` 组件必须转为客户端组件 (`use client`)。

**修改 `app/page.tsx`**：

```tsx
"use client" // 必须加上这行

import { useState, useMemo } from "react"
import { SiteCard, type Site } from "@/components/site-card"
import { CategoryTabs } from "@/components/category-tabs"

// ... MOCK_SITES 数据保持不变 ...

export default function Home() {
  const [activeCategory, setActiveCategory] = useState("All")

  // 1. 自动提取所有唯一的 Tags
  const allTags = useMemo(() => {
    const tags = new Set<string>()
    MOCK_SITES.forEach(site => {
      site.tags.forEach(tag => tags.add(tag))
    })
    return Array.from(tags).sort()
  }, []) // 依赖数组为空，只计算一次 (在真实数据中可能需要依赖 data)

  // 2. 根据当前选中的 Category 过滤网站
  const filteredSites = useMemo(() => {
    if (activeCategory === "All") {
      return MOCK_SITES
    }
    return MOCK_SITES.filter(site => site.tags.includes(activeCategory))
  }, [activeCategory])

  return (
    <div className="relative min-h-screen w-full bg-white dark:bg-neutral-950">
      {/* 背景层 (保持不变) */}
      
      <section className="container mx-auto px-4 py-8">
        {/* 顶部标题区 */}
        <div className="mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
            <div>
                <h2 className="text-3xl font-bold tracking-tight">Discover</h2>
                <p className="text-muted-foreground mt-1">
                    Found {filteredSites.length} sites in {activeCategory}
                </p>
            </div>
        </div>

        {/* 分类导航栏 - 放在列表上方 */}
        <div className="sticky top-14 z-30 -mx-4 bg-background/80 px-4 py-4 backdrop-blur-md md:static md:mx-0 md:bg-transparent md:p-0">
           <CategoryTabs 
             categories={allTags} 
             activeCategory={activeCategory} 
             onSelect={setActiveCategory} 
           />
        </div>
        
        {/* 网站列表 */}
        <div className="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          {filteredSites.map((site) => (
            <SiteCard key={site.id} site={site} />
          ))}
          
          {/* 空状态处理 */}
          {filteredSites.length === 0 && (
            <div className="col-span-full py-20 text-center text-muted-foreground">
                没有找到相关网站...
            </div>
          )}
        </div>
      </section>
    </div>
  );
}
```