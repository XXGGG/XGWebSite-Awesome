# 数据上传 (Data Upload)

利用 Python 把数据上传到 Supabase。

在 `scripts` 目录下新建文件 `sync.py`。

它会去读取 data.xlsx 文件。

### 为什么是 xlsx 而不是 csv？
- 因为逗号分隔问题，导致 tags 字段被错误解析。并且 其他字段有可能存在空值。
- 而 xlsx 格式可以避免这个问题。

## 图片上传

scripts/ 下创建了两个文件夹：

1. images_upload : 📥 放入待上传的图片 （例如 Google.png ）。
2. images_done : 📤 上传成功后，图片会自动移到这里 ，方便归档。

### 🐍 脚本逻辑 (upload_images.py)

1. 自动匹配 : 它会读取文件名（例如 Google.png -> 标题 Google ）。
2. 安全检查 : 先去数据库查这个 Google 网站存不存在。如果不存（或者名字没对上），就跳过，防止乱传。
3. 自动覆盖 : 如果 Supabase 桶里已经有同名图片，会直接 覆盖 更新。
4. 即时更新 : 上传成功后，会自动把新的图片 URL 写入数据库对应那条记录的 image_url 字段。
5. 自动归档 : 一切搞定后，把本地图片移动到 images_done 文件夹，保持工作区清爽。

### 设置 next.config.js

```js
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'rzbaojeyldwgqolgxcjy.supabase.co', // 你的 Supabase 项目域名
        port: '',
        pathname: '/**',
      },
    ],
  },
};

export default nextConfig;
```
